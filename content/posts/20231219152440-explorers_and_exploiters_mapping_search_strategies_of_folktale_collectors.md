+++
title = "Explorers and Exploiters: Deviations from Rarefaction Curves"
author = ["Folgert Karsdorp"]
lastmod = 2024-01-25T15:12:17+01:00
tags = ["diversity", "collection", "bias", "folktales", "rarefaction", "accumulation"]
draft = false
+++

This notebook is the second in of a series of notebooks based on a talk I gave
at the CUDAN 2023 conference in Tallinn, Estonia
(<https://cudan.tlu.ee/conference/>) together with [Melvin Wevers](https://www.melvinwevers.nl) and [Mike
Kestemont](http://mikekestemont.github.io/), titled _Steady Formulas, Shifting Spells: Estimating Folktale
Diversity_.


## Collector's curves {#collector-s-curves}

In a [previous discussion]({{< relref "20231218135129-explorers_and_exploiters_mapping_search_strategies_of_folktale_collectors.md" >}}), I delved into how we can use ecological concepts to
understand [cultural diversity]({{< relref "20210820130318-cultural_diversity.md" >}}), focusing on what we call '[cultural richness]({{< relref "20220211122147-richness.md" >}}).'
This term refers to the variety of unique items found in different collections.
I illustrated the use of a method developed by
Chao and Jost (<a href="#citeproc_bib_item_1">2012</a>) to compare this richness across
collections in a way that doesn’t depend on how much effort the collectors put
into gathering their items. This method is based on estimates of the "coverage"
of a collection (<a href="#citeproc_bib_item_2">Good 1953</a>).

One key idea is that the richness of a collection is closely linked to how many
items you've collected. Generally, the more items you gather, the more unique
ones you're likely to find. This relationship is illustrated using what we call
"collector's curves", sometimes also known as "species accumulation curves".
These curves show the number of new, unique categories (like species in ecology
or folktale types in folklore) we discover as we keep adding more items to our
collection.

We can compare these to another type of curve called a "rarefaction curve".
Unlike the collector's curve, which shows what we actually observe, the
rarefaction curve is more about what we might expect to find theoretically as we
keep adding more items. Take a look at the graph below. In this fictional
example, you can see how the rarefaction curve initially rises quickly. This
fast rise happens because we're finding the most common species. But, as time
goes on, the curve levels out because discovering new, rare species becomes
harder.

{{< figure src="/ox-hugo/2024-01-15_09-15-39_rarefaction.png" caption="<span class=\"figure-number\">Figure 1: </span>Fictional collector's curve and its corresponding rarefaction curve." >}}

To create a rarefaction curve, ecologists (and we can use this in cultural
studies too) pick random subsets from their total collection and note how many
unique species they find in each subset. This process is repeated, gradually
increasing the size of the subset, and the average number of species found in
each size group is plotted. Essentially, rarefaction curves show us what we
might expect to find in a smaller, randomly chosen part of a larger collection.

The main aim of my exploration here is to deepen our understanding of the
relationship between what we actually collect (shown in the collector's curves)
and what we might expect to collect if our process were completely random (shown
in the rarefaction curves). This is crucial because we know that collectors,
whether in cultural or biological contexts, often have certain biases. By
studying how actual collections differ from these theoretical curves, I hope to
learn something about the nature of these biases.


## Exploration versus Exploitation {#exploration-versus-exploitation}

Rarefaction curves thus serve as a benchmark, showing us the expected diversity
in a collection if items were gathered randomly and without any specific focus
or bias. It's a theoretical model that represents an idealized, unbiased
collection process. When the actual collector's curve -- the curve showing the
number of unique items actually found -- deviates from this model, it indicates
that the collection process is influenced by certain tendencies or preferences:

-   If the actual curve rises above the rarefaction curve, it suggests that the
    collection is more diverse than what random sampling would predict. This could
    mean that the collector is particularly effective at uncovering a wide variety
    of items, possibly going out of their way to find rare or unique items. It's a
    pattern suggesting a proactive approach in seeking diversity, one we might call
    an "exploration bias".

-   On the other hand, if the collector's curve falls below the rarefaction curve,
    this indicates a narrower scope of collection than what would be expected at
    random. In this case, the collector might be focusing more on gathering more
    items or variants of a particular type or category, possibly due to a
    preference for certain kinds of items or a more limited scope of collection.
    The bias here could be seen as a form of "exploitation bias".

The idea is that these deviations are more than just statistical anomalies; they
are clues to the collector's strategy, preferences, and even potential biases.
Whether due to personal interest, accessibility, or other factors, these
patterns can significantly shape the composition of the collection.


## Simulating Collectors {#simulating-collectors}

To put this theory into practice and explore how these biases play out in real
collection scenarios, I developed a simple simulation model that allows us to
experiment with different biases in a controlled environment. The `sample_items`
function below implements a simulation model for a collection process influenced
by a tendency or bias toward novelty or familiarity, or exploration versus
eploitation.

```python
import random

def sample_items(item_universe, sample_size=100, bias=0):
    collection, collection_set = [], set()

    while len(collection) < sample_size:
        sampled_item = random.choice(item_universe)

        is_item_new = sampled_item not in collection_set
        keep_probability = 0.5 + (bias / 2) * (1 if is_item_new else -1)

        if random.random() < keep_probability:
            collection.append(sampled_item)
            collection_set.add(sampled_item)

    return collection
```

The general idea behind the function is to mimic the collection process by
deciding whether to include each potential new item based on a probability that
is adjusted by a "bias" parameter \\(\beta\\). This parameter tilts the balance of
the decision-making process:

-   A positive value of \\(\beta\\) leads to a preference for adding new, uncollected items,
    simulating an explorative behavior.
-   A negative \\(\beta\\) favors the selection of items that have already been
    collected, simulating a conservative or risk-averse behavior.
-   With no bias, the selection is neutral, giving equal opportunity to new and
    already collected items.


## Analyzing the Model {#analyzing-the-model}

Using the `sample_items` function, the goal is to observe how varying degrees of
bias influence the diversity of items collected over time, providing us with a
more precise insight into the decision-making patterns in collection processes.
The simulation setup is as follows:

-   **Bias Range**: I explored a range of bias strengths, from \\(\beta=-0.9\\)
    (indicating strong exploitation or familiarity bias) to \\(\beta=0.9\\)
    (representing strong exploration or novelty bias). This range also included a
    neutral point (\\(\beta=0.0\\)), where there was no preference for either new or
    familiar items.
-   **Sample Size**: Each simulation involves collecting 4,000 items. This sample
    size was chosen to ensure that each unique item in the universe is likely to
    be sampled at least once. This consistency is crucial, as it ensures that the
    rarefaction curves for all simulations is identical, and thus serves as a
    reliable baseline for comparison.
-   **Iterations**: I repeat each simulation 100 times for each bias setting. This
    repetition is necessary to average out anomalies and highlight the consistent
    trends attributable to the biases. We then compute the mean collector's curves
    for each bias setting.

{{< figure src="/ox-hugo/2024-01-25_09-29-06_simmodel.png" caption="<span class=\"figure-number\">Figure 2: </span>Collector's curves for different bias values. Positive values indicate a exploration bias, while negative value indicate a exploitation bias. The dashed line displays the rarefaction curve which is the same for all models." >}}

This simulation approach allows us to visualize and quantify the effects of
varying biases on collection diversity. The figure above highlights how
preferences for novelty (positive bias) or familiarity (negative) can shape the
composition of a collection. The dashed line represents the rarefaction curve,
which is the same for all collector's curves. Note that the rarefaction curve is
also identical to the situation where a collector has no bias (i.e. \\(\beta=0\\)).


## Biases of Folktale Collectors {#biases-of-folktale-collectors}

In my earlier notebook [Coverage-based Comparisons of Cultural Diversity]({{< relref "20231218135129-explorers_and_exploiters_mapping_search_strategies_of_folktale_collectors.md" >}}), I
touched upon a folklore project undertaken by the Meertens Institute during the
60s and 70s. This ambitious initiative aimed to map Dutch folklore
comprehensively, resulting in an atlas of folktales. A team of folktale
collectors, appointed by the institute, traversed various regions near their
residences to gather these tales. Their mission was to document the stories
across the entire Netherlands. This groundbreaking effort in folkloristics
amassed a remarkable collection of over 32,000 stories. In this section, I aim
to explore the biases in their collection efforts based on their collection's
curves and the relationship with the accompanying rarefaction curves.

{{< figure src="/ox-hugo/2024-01-25_11-02-46_Wever-type-rarefaction.png" caption="<span class=\"figure-number\">Figure 3: </span>Collector Wever's Bias Illustrated: The dotted line represents Wever's actual diversity of collected stories, while the solid line is the theoretical rarefaction curve. The orange area shows segments of conservative collecting, with a preference for familiar story types." >}}

Examining individual collectors, we turn our attention to Wever, who amassed
nearly a thousand tales, primarily from the north-eastern region of the
Netherlands. The graph above illustrates Wever's collection trajectory
(shown as the dotted line) and juxtaposes it with the expected diversity trend,
known as the rarefaction curve (the solid line). The shaded orange area
highlights the segments where Wever's actual diversity of new story types fell
short of the number anticipated by a neutral collection model. This suggests
that Wever exhibited a tendency towards collecting known story types rather than
venturing into new narrative territories.

{{< figure src="/ox-hugo/2024-01-25_11-06-34_Keuning-type-rarefaction.png" caption="<span class=\"figure-number\">Figure 4: </span>Keuning's Active Exploration: The dotted line shows the actual diversity of stories collected by Keuning, while the solid line indicates the expected rarefaction curve. The blue shaded area denotes Keuning's tendency to seek out and collect new story types beyond the neutral model's prediction." >}}

Keuning's collection, featuring a comparable number of stories gathered from the
northern region of Frysia, presents a contrasting pattern. The graph depicts
Keuning's collector's curve, which surpasses the theoretical rarefaction curve,
suggesting a tendency towards discovering more new story types than one would
expect from a neutral, unbiased approach. The phase of active exploration is
marked in blue, underscoring Keuning's inclination towards variety in story
collection.

The plot below provides the collectors' curves and corresponding rarefaction for
a number of other collectors.

{{< figure src="/ox-hugo/2024-01-25_14-37-45_rarefactions-all.png" caption="<span class=\"figure-number\">Figure 5: </span>Collectors' curves and accompaying rarefaction curves." >}}


## More than just random fluctuations? {#more-than-just-random-fluctuations}

To evaluate whether the observed deviations in the collectors' curves from the
expected rarefaction curve are due to chance or represent a pronounced bias, I
use a bootstrapping approach. First, for each collector, we establish an
empirical collector's curve based on the actual data gathered. In parallel, we
generate a rarefaction curve reflecting a hypothetical unbiased collection
process, where material is collected without any predisposition towards novelty
or familiarity.

Subsequently, we initiate the bootstrapping process, creating 1,000 random
collector's curves. This can be accomplished by reshuffling the empirical data
1,000 times, which allows us to simulate the variation one might expect from
random chance. For each of these simulated curves, we calculate the difference
in the area under the curve (AUC) when compared to the rarefaction curve.

The same difference in AUC is then computed between the empirical collector's
curve and the rarefaction curve. We visualize the distribution of the AUC
differences from the bootstrapped curves in a histogram. The histogram below is
based on the collection of Wever, we saw before. Here, the overlaid vertical
line marks the AUC difference of the empirical collector's curve.

{{< figure src="/ox-hugo/2024-01-25_14-40-40_significance-test-wever.png" caption="<span class=\"figure-number\">Figure 6: </span>Left: Collector's curve and corresponding rarefaction curve. Right: Histogram of Bootstrapped AUC Differences: The distribution represents 1000 simulated collectors' curves compared to the rarefaction curve. The orange vertical line marks the empirical AUC difference, with its position relative to the 89% confidence interval indicating the significance of the collector's bias." >}}

By examining the position of the empirical difference relative to the
bootstrapped distribution, we can infer the likelihood of the observed
deviation. Specifically, we assess if the empirical value falls within the 89%
confidence interval (the .89 quantile) of the bootstrapped differences. If the
empirical value lays outside this range, it suggests that the deviation from the
rarefaction curve is indeed significant or -- to use a less loaded term --
marked and not a product of random variation. This analysis gives more
confidence in marking Wever as a conservative collector.

In applying our bootstrapping method to assess the collection biases of six
folklorists, the results, as illustrated in the plot below, are quite revealing.
The analysis indicates that Jaarsma and Wever's collections exhibit a marked
conservative trend, with their empirical AUC differences falling well outside
the expected range of random curves. This suggests a significant preference for
familiar story types over novel ones in their folktales collection process.

{{< figure src="/ox-hugo/2024-01-25_14-24-32_significance-all.png" caption="<span class=\"figure-number\">Figure 7: </span>Bootstrapping Analysis of Collector Biases: The histograms represent the distribution of AUC differences for 1000 bootstrapped collector's curves. The vertical orange lines indicate the empirical AUC differences for each collector." >}}

Keuning's results, while less pronounced, still indicate a tendency towards
exploration. His empirical AUC difference leans towards the upper quantile,
suggesting a bias towards collecting new story types.

The remaining collectors—Kooijman, Bijlsma, and Dinnissen—do not show
substantial deviations from the mean AUC differences. Their collecting patterns
do not significantly differ from what would be anticipated under a neutral
model, indicating no strong bias towards either exploration or exploitation in
their approach to collecting folktales. This analysis allows us to
quantitatively measure and compare the collection strategies of individual
collectors.


## Outlook {#outlook}

In the next notebook, I will delve deeper into the functional differences
between stories within the folktale collections. While the current analysis
employs the traditional folktale type classification to quantify unique stories,
some folktale types bear closer resemblance to each other than
others. To capture this subtlety, I plan to employ a diversity metric that
acknowledges the varying degrees of similarity between folktale types.

This refined approach will hopefully allow us to paint a more nuanced portrait
of each collector's strategy. For instance, a collector might exhibit a broad
range in the types of folktales gathered, yet these types could be closely
related in theme or structure. Conversely, another collector might focus on a
narrower range of folktale types but explore a wide variety of versions within
those types.

## References

<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Chao, Anne, and Lou Jost. 2012. “Coverage-Based Rarefaction and Extrapolation: Standardizing Samples by Completeness Rather than Size.” <i>Ecology</i> 93 (12): 2533–47. <a href="https://doi.org/10.1890/11-1952.1">https://doi.org/10.1890/11-1952.1</a>.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_2"></a>Good, I. J. 1953. “The Population Frequencies of Species and the Estimation of Population Parameters.” <i>Biometrika</i> 40 (3-4): 237–64. <a href="https://doi.org/10.1093/biomet/40.3-4.237">https://doi.org/10.1093/biomet/40.3-4.237</a>.</div>
</div>
